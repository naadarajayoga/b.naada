<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Naada Raja Yoga</title>
  <meta name="description" content="Explore our journey with glimpses on YouTube and Instagram, and enjoy personalized daily progress with our online classes">

  <!-- Open Graph -->
  <meta property="og:title" content="Naada Raja Yoga" />
  <meta property="og:description" content="Explore our journey with glimpses on YouTube and Instagram, and enjoy personalized daily progress with our online classes" />
  <meta property="og:image" content="https://naadaraja.com/images/og-image.jpg" />
  <meta property="og:url" content="https://b.naadaraja.com" />
  <meta property="og:type" content="website" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Naada Raja Yoga" />
  <meta name="twitter:description" content="Explore our journey with glimpses on YouTube and Instagram, and enjoy personalized daily progress with our online classes" />
  <meta name="twitter:image" content="https://naadaraja.com/images/og-image.jpg" />

  <!-- Manifest & Favicons -->
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/x-icon" href="/favicon.ico/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico/16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico/32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon.ico/48.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico/180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon.ico/192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/favicon.ico/512.png">
  <meta name="theme-color" content="#000000">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Playfair+Display:ital,wght@0,500;0,700;1,400&display=swap" rel="stylesheet">

  <!-- Site CSS (combined & cleaned) -->
  <style>
    :root {
      --bottom-bar-h: 65px; /* single source of truth for navbar/footer spacing */
      --content-max-w: 1100px;
    }

    /* GLOBAL RESET */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    html, body { height: 100%; }
    body { line-height: 1.6; color: #333; background: #ffffff; -webkit-font-smoothing:antialiased; }
    img { max-width: 100%; display: block; }

    /* HEADER */
    header {
      background: #ffffff;
      padding: 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: center;
    }
    .branding { display:flex; align-items:center; justify-content:center; gap:12px; max-width:var(--content-max-w); width:100%; }
    .branding img { width:80px; height:auto; flex-shrink:0; }
    .branding-text { display:flex; flex-direction:column; justify-content:center; text-align:center; }
    .branding h1 { font-family:'Marcellus', serif; font-size:2.2rem; font-weight:600; letter-spacing:0.5px; color:#111; text-shadow:0 1px 4px rgba(0,0,0,0.08); }
    .branding p { font-family:'Playfair Display', serif; font-size:1.05rem; color:#555; font-style:italic; letter-spacing:0.4px; }

    @media (max-width:700px) {
      header { padding:15px; }
      .branding img { width:65px; }
      .branding h1 { font-size:1.7rem; line-height:1.2; }
      .branding p { font-size:0.95rem; }
    }
    @media (max-width:400px) {
      .branding img { width:60px; }
      .branding h1 { font-size:1.5rem; }
      .branding p { font-size:0.9rem; }
    }

    /* MAIN AREA */
    #page-root { display:flex; flex-direction:column; min-height:100vh; align-items:stretch; }
    main#app { width:100%; max-width:var(--content-max-w); margin: 20px auto; padding: 12px 18px; box-sizing:border-box; flex:1 0 auto; }

    /* Bottom Navbar */
    .bottom-navbar {
      --bar-h: var(--bottom-bar-h);
      --bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      --text: #ecf0f1;
      --accent: #f39c12;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: var(--bar-h);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 50px;
      background: var(--bg);
      color: var(--text);
      z-index: 9999;
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .bottom-navbar .nav-item {
      display:inline-flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
      color:var(--text); text-decoration:none; padding:8px 12px; border-radius:12px;
      transition:var(--transition); position:relative; cursor:pointer; font-size:12px; font-weight:600;
    }
    .bottom-navbar .nav-item::before {
      content:''; position:absolute; inset:0; background:rgba(243,156,18,0.1); border-radius:12px; opacity:0; transition:var(--transition); z-index:-1;
    }
    .bottom-navbar .nav-item:hover { transform:translateY(-3px); color:var(--accent); }
    .bottom-navbar .nav-item:hover::before { opacity:1; }
    .bottom-navbar svg { width:24px; height:24px; display:block; fill:currentColor; transition:var(--transition); }
    .bottom-navbar .nav-item.active { color:var(--accent); }
    .bottom-navbar .nav-item.active svg { filter: drop-shadow(0 0 8px rgba(243,156,18,0.5)); transform:scale(1.1); }
    .bottom-navbar .nav-item.active::before { opacity:1; background: rgba(243,156,18,0.15); }

    @media (max-width:520px) {
      .bottom-navbar { --bar-h: 70px; padding:8px 10px; gap:10px; justify-content:space-around; }
      .bottom-navbar .nav-item { padding:6px 8px; }
      .bottom-navbar svg { width:22px; height:22px; }
      main#app { margin: 12px auto; }
    }

    /* Peek Footer */
    .peek-footer {
      --bar-h: var(--bottom-bar-h);
      --bg: #ffffff;
      --text: #000000;
      --muted: #bdbdbd;
      --max-w: var(--content-max-w);
      display:block; width:100%; background:var(--bg); color:var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; line-height:1.2; position:relative;
    }
    .peek-footer__spacer { height:4px; width:100%; }
    .peek-footer__hidden { max-width:var(--max-w); margin:0 auto; padding:10px 18px; padding-bottom: calc(var(--bar-h) + 2px); text-align:center; box-sizing:border-box; }
    .footer-links { display:flex; gap:16px; justify-content:center; align-items:center; flex-wrap:wrap; }
    .footer-links a { color:var(--muted); text-decoration:none; font-size:14px; padding:4px 6px; border-radius:6px; }
    .footer-links a:hover, .footer-links a:focus { color:var(--text); text-decoration:underline; outline:none; }
    @media (max-width:520px) { .footer-links { gap:10px; } }

    /* small utility */
    .sr-only { position: absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
</head>
<body>
  <div id="page-root">
    <!-- Header -->
    <header>
      <div class="branding">
        <img src="/images/Naada Raja Yoga Logo.png" alt="Naada Raja Yoga Logo">
        <div class="branding-text">
          <h1>Naada Raja Yoga</h1>
          <p>Personalized Yoga Journey</p>
        </div>
      </div>
    </header>

    <!-- Dynamic content area -->
    <main id="app" role="main" aria-live="polite"></main>

    <!-- Peek Footer -->
    <footer class="peek-footer" id="site-footer" aria-label="Site footer">
      <div class="peek-footer__spacer" aria-hidden="true"></div>
      <div class="peek-footer__hidden" role="region" aria-label="Footer expanded links">
        <nav class="footer-links" aria-label="Footer links">
          <a href="https://naadaraja.com/privacy">Privacy Policy</a>
          <a href="https://naadaraja.com/terms">Terms &amp; Conditions</a>
          <a href="https://naadaraja.com/refund">Refund Policy</a>
        </nav>
      </div>
    </footer>

    <!-- Bottom Navbar -->
    <nav class="bottom-navbar" id="site-navbar" role="navigation" aria-label="Main navigation">
      <a class="nav-item" href="/contact" data-target="contact" aria-label="Contact">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M6.6 10.2a15.05 15.05 0 006.2 6.2l1.8-1.8a1 1 0 01.9-.24c1 .25 2 .38 3 .38a1 1 0 011 1v3a1 1 0 01-1 1C9.2 23 1 14.8 1 3a1 1 0 011-1h3a1 1 0 011 1c0 1.1.13 2.1.38 3a1 1 0 01-.24.9L6.6 10.2z"/></svg>
        <span>Contact</span>
      </a>

      <a class="nav-item" href="/" data-target="home" aria-label="Home">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" aria-hidden="true" focusable="false"><path d="M541 229.16l-61-52.06V56c0-13.25-10.75-24-24-24h-72c-13.25 0-24 10.75-24 24v24L314.4 43c-15.9-13.6-39.3-13.6-55.2 0L35 229.2c-9.9 8.4-11.1 23.3-2.7 33.2s23.3 11.1 33.2 2.7L96 232.1V456c0 30.9 25.1 56 56 56h96V360h80v152h96c30.9 0 56-25.1 56-56V232l30.6 26c9.9 8.4 24.8 7.1 33.2-2.7 8.4-9.9 7.1-24.8-2.7-33.2z"/></svg>
        <span>Home</span>
      </a>

      <a class="nav-item" href="/courses" data-target="courses" aria-label="Courses">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" aria-hidden="true" focusable="false"><path d="M320 96a64 64 0 1 0 0-128 64 64 0 1 0 0 128zM528 352h-56l-41-82c-6-12-19-18-32-14s-21 16-19 29l20 99H240l20-99c2-13-5-25-19-29s-26 2-32 14l-41 82H112c-27 0-48 21-48 48s21 48 48 48h416c27 0 48-21 48-48s-21-48-48-48z"/></svg>
        <span>Courses</span>
      </a>
    </nav>
  </div>

  <!-- JS: dynamic loader + spacing handling -->
  <script>
    (function () {
      // Map of logical page -> fragment file (adjust paths if you keep fragments elsewhere)
      const containerMap = {
        home: '/home.html',
        contact: '/contact.html',
        courses: '/courses.html'
      };

      // In-memory cache
      const cache = {};

      const app = document.getElementById('app');
      const navbar = document.getElementById('site-navbar');
      const siteFooter = document.getElementById('site-footer');
      const navItems = Array.from(navbar.querySelectorAll('.nav-item'));

      // Mark a specific nav element active (by target name)
      function setActive(targetName) {
        navItems.forEach(item => {
          if (item.dataset.target === targetName) item.classList.add('active');
          else item.classList.remove('active');
        });
      }

      function clearApp() {
        while (app.firstChild) app.removeChild(app.firstChild);
      }

      function showLoading() {
        clearApp();
        const loader = document.createElement('div');
        loader.id = 'loading';
        loader.textContent = 'Loading...';
        loader.style.padding = '24px';
        app.appendChild(loader);
      }

      // Ensure main app has enough padding-bottom so content never sits under footer + navbar
      function adjustAppSpacing() {
        if (!app) return;
        const navRect = navbar ? navbar.getBoundingClientRect() : {height: 0};
        const footerRect = siteFooter ? siteFooter.getBoundingClientRect() : {height: 0};
        const extraGap = 16;
        const pb = Math.ceil((footerRect.height || 0) + (navRect.height || 0) + extraGap);
        app.style.paddingBottom = pb + 'px';
      }

      window.addEventListener('resize', adjustAppSpacing);

      // Load fragment 'name' into #app
      async function loadContainer(name) {
        const url = containerMap[name];
        if (!url) {
          console.warn('No container mapping for', name);
          return;
        }

        setActive(name);       // mark the nav button (name corresponds to a nav-item dataset.target)
        showLoading();
        adjustAppSpacing();

        try {
          let html;
          if (cache[name]) {
            html = cache[name];
          } else {
            const res = await fetch(url, {cache: 'no-store'});
            if (!res.ok) throw new Error('Failed to load ' + url + ' (' + res.status + ')');
            html = await res.text();
            cache[name] = html;
          }

          clearApp();
          const wrapper = document.createElement('div');
          wrapper.innerHTML = html;
          while (wrapper.firstChild) app.appendChild(wrapper.firstChild);

          // accessibility: focus first heading
          const firstHeading = app.querySelector('h1, h2, [role="main"]');
          if (firstHeading) {
            firstHeading.setAttribute('tabindex', '-1');
            firstHeading.focus();
          }

          // bring app into view so footer peek predictable
          app.scrollIntoView({behavior: 'auto'});
          adjustAppSpacing();
        } catch (err) {
          clearApp();
          const errBox = document.createElement('div');
          errBox.style.padding = '20px';
          errBox.style.color = 'white';
          errBox.style.background = 'rgba(200,0,0,0.15)';
          errBox.textContent = 'Sorry â€” could not load content. ' + (err.message || '');
          app.appendChild(errBox);
          console.error(err);
        }
      }

      // Delegated nav clicks
      navbar.addEventListener('click', (e) => {
        const a = e.target.closest('.nav-item');
        if (!a) return;
        e.preventDefault();

        const targetName = a.dataset.target;
        // special requirement: clicking Home should load 'courses' container
        const loadName = (targetName === 'home') ? 'courses' : targetName;

        // If clicked item is already active, just scroll app into view
        if (a.classList.contains('active')) {
          app.scrollIntoView({behavior: 'smooth'});
          // But if active is 'home' and user clicked it and the rule says load courses each click,
          // we still load the courses container so repeated home clicks also load courses.
          if (targetName === 'home') {
            loadContainer(loadName);
            try { history.pushState({page: loadName}, '', '/' + loadName); } catch (err) {}
          }
          return;
        }

        // Mark the clicked nav item active (setActive uses the nav dataset target so it highlights Home button even if it loads courses)
        setActive(targetName);

        // Load the chosen container
        loadContainer(loadName);

        // update history (so back/forward works)
        try { history.pushState({page: loadName}, '', '/' + loadName); } catch (err) {}
      });

      // popstate handling
      window.addEventListener('popstate', (ev) => {
        const state = ev.state;
        // if we have state.page use that; otherwise fallback to 'home'
        const page = state && state.page ? state.page : 'home';
        // decide which nav item should be active: if page is 'courses' and user originally clicked Home to load courses,
        // we still want to mark 'home' active only if the initial URL path was '/home' (this is edgey).
        // Simpler approach: mark the nav whose dataset matches page; if none, mark 'home'.
        const navForPage = navItems.find(n => n.dataset.target === page);
        const activeName = navForPage ? page : 'home';
        setActive(activeName);
        loadContainer(page);
      });

      // initial load: default to 'home' if pathname doesn't match containerMap
      document.addEventListener('DOMContentLoaded', () => {
        adjustAppSpacing();
        const pathname = window.location.pathname.replace(/^\/+|\/+$/g, '');
        // If pathname matches a container key, use it as initial; otherwise default 'home'
        const initial = (pathname && Object.prototype.hasOwnProperty.call(containerMap, pathname)) ? pathname : 'home';
        setActive(initial);
        loadContainer(initial);
      });
    })();
  </script>
</body>
</html>
