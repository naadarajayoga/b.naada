<!----------------
Navigation Section
----------------->

<nav class="bottom-navbar" id="site-navbar" role="navigation" aria-label="Main navigation">
  <a class="nav-item" href="https://b.naadaraja.com/contact" aria-label="Contact">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path d="M6.6 10.2a15.05 15.05 0 006.2 6.2l1.8-1.8a1 1 0 01.9-.24c1 .25 2 .38 3 .38a1 1 0 011 1v3a1 1 0 01-1 1C9.2 23 1 14.8 1 3a1 1 0 011-1h3a1 1 0 011 1c0 1.1.13 2.1.38 3a1 1 0 01-.24.9L6.6 10.2z"/>
    </svg>
    <span>Contact</span>
  </a>

  <a class="nav-item active" href="https://b.naadaraja.com" aria-label="Home">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
      <path d="M541 229.16l-61-52.06V56c0-13.25-10.75-24-24-24h-72c-13.25 0-24 10.75-24 24v24L314.4 43c-15.9-13.6-39.3-13.6-55.2 0L35 229.2c-9.9 8.4-11.1 23.3-2.7 33.2s23.3 11.1 33.2 2.7L96 232.1V456c0 30.9 25.1 56 56 56h96V360h80v152h96c30.9 0 56-25.1 56-56V232l30.6 26c9.9 8.4 24.8 7.1 33.2-2.7 8.4-9.9 7.1-24.8-2.7-33.2z"/>
    </svg>
    <span>Home</span>
  </a>

  <a class="nav-item" href="https://b.naadaraja.com/courses" aria-label="Courses">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
      <path d="M320 96a64 64 0 1 0 0-128 64 64 0 1 0 0 128zM528 352h-56l-41-82c-6-12-19-18-32-14s-21 16-19 29l20 99H240l20-99c2-13-5-25-19-29s-26 2-32 14l-41 82H112c-27 0-48 21-48 48s21 48 48 48h416c27 0 48-21 48-48s-21-48-48-48z"/>
    </svg>
    <span>Courses</span>
  </a>
</nav>

<style>
  .bottom-navbar {
    --bar-h: 65px;
    --bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
    --text: #ecf0f1;
    --accent: #f39c12;
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: var(--bar-h);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 50px;
    background: var(--bg);
    color: var(--text);
    z-index: 9999;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .bottom-navbar .nav-item {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    color: var(--text);
    text-decoration: none;
    padding: 8px 12px;
    border-radius: 12px;
    transition: var(--transition);
    position: relative;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
  }

  .bottom-navbar .nav-item::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(243, 156, 18, 0.1);
    border-radius: 12px;
    opacity: 0;
    transition: var(--transition);
    z-index: -1;
  }

  .bottom-navbar .nav-item:hover {
    transform: translateY(-3px);
    color: var(--accent);
  }

  .bottom-navbar .nav-item:hover::before {
    opacity: 1;
  }

  .bottom-navbar svg {
    width: 24px;
    height: 24px;
    display: block;
    fill: currentColor;
    transition: var(--transition);
  }

  .bottom-navbar .nav-item.active {
    color: var(--accent);
  }

  .bottom-navbar .nav-item.active svg {
    filter: drop-shadow(0 0 8px rgba(243, 156, 18, 0.5));
    transform: scale(1.1);
  }

  .bottom-navbar .nav-item.active::before {
    opacity: 1;
    background: rgba(243, 156, 18, 0.15);
  }

  @media (max-width: 520px) {
    .bottom-navbar {
      --bar-h: 70px;
      padding: 8px 10px;
      gap: 10px;
      justify-content: space-around;
    }

    .bottom-navbar .nav-item {
      padding: 6px 8px;
    }

    .bottom-navbar svg {
      width: 22px;
      height: 22px;
    }
  }
</style>

<script>
  (function () {
    // Utility: normalize a path (treat /index.html and / the same)
    function normalizePath(p) {
      if (!p) return '/';
      // Remove query + hash
      p = p.split('#')[0].split('?')[0];
      // Ensure leading slash
      if (!p.startsWith('/')) p = '/' + p;
      // Treat /index.html as /
      p = p.replace(/\/index\.html$/i, '/');
      // Remove trailing slash except for root
      if (p.length > 1 && p.endsWith('/')) p = p.slice(0, -1);
      return p;
    }

    // Run when DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      try {
        const currentPath = normalizePath(window.location.pathname);

        // If navbar inserted later via fetch, run a small setup that can be re-run
        const setupActive = (root = document) => {
          const navItems = root.querySelectorAll('.bottom-navbar .nav-item');
          navItems.forEach(item => {
            item.classList.remove('active');

            // get href attribute and convert to a URL relative to current page
            const href = item.getAttribute('href') || '';
            let itemPath;
            try {
              // If href is absolute (has protocol) this will parse correctly
              const url = new URL(href, window.location.origin);
              itemPath = url.pathname;
            } catch (e) {
              // fallback: treat as path
              itemPath = href;
            }
            itemPath = normalizePath(itemPath);

            // NEW: Exact-match only â€” highlight only when paths are identical
            if (itemPath === currentPath) {
              item.classList.add('active');
            }

            // Accessibility: ensure role & keyboard click
            item.setAttribute('role', 'link');
            item.addEventListener('keydown', (ev) => {
              if (ev.key === 'Enter' || ev.key === ' ') {
                ev.preventDefault();
                item.click();
              }
            });
          });
        };

        // If the navbar is already present, run setup immediately
        if (document.querySelector('.bottom-navbar')) {
          // small fade-in for nicer effect
          const bar = document.querySelector('.bottom-navbar');
          bar.style.opacity = 0;
          bar.style.transition = 'opacity 220ms ease';
          // allow CSS to paint then fade in
          requestAnimationFrame(() => (bar.style.opacity = 1));
          setupActive(document);
        }

        // If your page loads navbar by fetch() later, you can re-run setup by emitting an event:
        // document.dispatchEvent(new Event('navbar:loaded'));
        // We'll listen for that and run setup automatically
        document.addEventListener('navbar:loaded', () => {
          setupActive(document);
        });
      } catch (err) {
        // never crash the page if something goes wrong
        console.error('Navbar script error:', err);
      }
    });
  })();
</script>
